# SQLite Database Configuration
# Configurable database location - defaults to ./data if not specified
sqlite.database.location=${SQLITE_DB_LOCATION:./data}
spring.datasource.url=jdbc:sqlite:${sqlite.database.location}/imovel_db.sqlite?journal_mode=WAL&synchronous=NORMAL&cache_size=10000&foreign_keys=on&busy_timeout=30000
spring.datasource.driver-class-name=org.sqlite.JDBC

# Hibernate/JPA Configuration for SQLite
spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# SQLite-specific Hibernate properties
spring.jpa.properties.hibernate.dialect=org.hibernate.community.dialect.SQLiteDialect
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.id.new_generator_mappings=false
spring.jpa.properties.hibernate.jdbc.use_get_generated_keys=false
spring.jpa.properties.hibernate.id.db_structure_naming_strategy=legacy
spring.jpa.properties.hibernate.id.optimizer.pooled.prefer_lo=true
spring.jpa.properties.hibernate.jdbc.batch_size=0

# Connection Pool Configuration for SQLite
spring.datasource.hikari.maximum-pool-size=1
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# Local File Storage Configuration (for SQLite profile)
storage.local.path=./data/uploads
storage.local.url=http://localhost:8080/media

# Storage Provider Selection (LOCAL for SQLite development)
storage.type.provider=S3

# Environment tag for metrics
management.metrics.tags.environment=sqlite-development

# AWS Configuration (uses environment variables set by setup script)
aws.access-key=${AWS_ACCESS_KEY}
aws.secret-key=${AWS_SECRET_KEY}
aws.s3.region=${AWS_S3_REGION}
aws.s3.bucket-name=${AWS_S3_BUCKET_NAME}

# Mail Configuration (uses environment variables set by setup script)
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}

# Stripe Configuration (uses environment variables set by setup script)
stripe.secret-key=${STRIPE_SECRET_KEY}
stripe.public-key=${STRIPE_PUBLIC_KEY}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET}